// controllers/ordersController.js
import { Order, OrderItem, Product, User } from '../models/index.js';

export async function getOrderById(id) {
  return Order.findByPk(id, {
    include: [
      { model: User, as: 'buyer', attributes: ['id', 'name', 'email'] },
      {
        model: OrderItem,
        as: 'items',
        include: [{ model: Product, as: 'product', attributes: ['id', 'title', 'price'] }],
      },
    ],
  });
}
